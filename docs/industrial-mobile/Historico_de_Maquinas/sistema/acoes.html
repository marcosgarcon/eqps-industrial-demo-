<!doctype html><html lang="pt-br"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Plano de AÃ§Ã£o â€” MQ_01</title>
<link rel="stylesheet" href="./assets/style.css">
</head><body>
  <div class="header">
    <h1>ðŸŽ¯ Plano de AÃ§Ã£o â€” MQ_01</h1>
    <nav>
      <a href="./fabrica.html">FÃ¡brica</a>
      <a href="./index.html">Dashboard</a>
      <a href="./tv.html">TV</a>
      <a href="./acoes.html">AÃ§Ãµes</a>
      <a href="./analise.html">AnÃ¡lises</a>
    </nav>
  </div>

  <div class="container">
    <div class="card">
      <h3>+ Nova AÃ§Ã£o</h3>
      <input id="acao" placeholder="DescriÃ§Ã£o da aÃ§Ã£o">
      <input id="responsavel" placeholder="ResponsÃ¡vel">
      <input id="prazo" type="date">
      <select id="status"><option>Aberto</option><option>Em Andamento</option><option>Fechado</option></select>
      <div style="display:flex;gap:.5rem;flex-wrap:wrap">
        <button id="salvar" class="btn">Adicionar</button>
        <button id="limpar" class="btn btn-ghost">Limpar</button>
      </div>
    </div>

    <table>
      <thead><tr><th>AÃ§Ã£o</th><th>ResponsÃ¡vel</th><th>Prazo</th><th>Status</th><th>AÃ§Ãµes</th></tr></thead>
      <tbody id="tb"></tbody>
    </table>
    <div class="muted">Dados salvos no navegador (localStorage). acoes.json Ã© a semente inicial.</div>
  </div>

  <div class="footer">Desenvolvido por Marcos GarÃ§on P de Oliveira</div>

  <script>
    const LS='Acoes_MQ_01';
    async function seed(){
      if(localStorage.getItem(LS)) return JSON.parse(localStorage.getItem(LS));
      try{ const r=await fetch('../Setor%20-XY/MQ_01/acoes.json'); const d=await r.json(); localStorage.setItem(LS, JSON.stringify(d)); return d; }
      catch(e){ localStorage.setItem(LS,'[]'); return []; }
    }
    let acoes=[];
    function render(){
      tb.innerHTML=''; acoes.forEach((a,i)=>tb.insertAdjacentHTML('beforeend',`
        <tr><td>${a.acao}</td><td>${a.responsavel}</td><td>${a.prazo||'-'}</td><td>${a.status}</td>
        <td><button class="btn btn-warn" onclick="editar(${i})">Editar</button> <button class="btn btn-danger" onclick="excluir(${i})">Excluir</button></td></tr>`));
    }
    window.editar=i=>{const a=acoes[i]; acao.value=a.acao; responsavel.value=a.responsavel; prazo.value=a.prazo||''; status.value=a.status||'Aberto';
      salvar.onclick=()=>{acoes[i]={acao:acao.value,responsavel:responsavel.value,prazo:prazo.value,status:status.value}; localStorage.setItem(LS, JSON.stringify(acoes)); render(); limpar();};};
    window.excluir=i=>{ if(confirm('Excluir?')){ acoes.splice(i,1); localStorage.setItem(LS, JSON.stringify(acoes)); render(); } };
    function limpar(){ acao.value=''; responsavel.value=''; prazo.value=''; status.value='Aberto'; salvar.onclick=add; }
    function add(){ if(acao.value && responsavel.value){ acoes.push({acao:acao.value,responsavel:responsavel.value,prazo:prazo.value,status:status.value||'Aberto'}); localStorage.setItem(LS, JSON.stringify(acoes)); render(); limpar(); } else alert('Preencha aÃ§Ã£o e responsÃ¡vel'); }
    document.getElementById('limpar').onclick=limpar;
    (async()=>{acoes=await seed(); render(); salvar.onclick=add;})();
  </script>
</body></html>
