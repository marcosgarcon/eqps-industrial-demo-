<!doctype html><html lang="pt-br"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Plano de A√ß√£o - MQ_01</title>
<link rel="stylesheet" href="./assets/style.css">
</head><body>
  <div class="header">
    <h1>üéØ Plano de A√ß√£o ‚Äî MQ_01</h1>
    <nav>
      <a href="./index.html">Dashboard</a>
      <a href="./fabrica.html">F√°brica</a>
      <a href="./tv.html">TV</a>
      <a href="./acoes.html">A√ß√µes</a>
      <a href="./analise.html">An√°lises</a>
    </nav>
  </div>

  <div class="container">
    <div class="card">
      <h3>+ Nova A√ß√£o</h3>
      <input id="acao" placeholder="Descri√ß√£o da a√ß√£o">
      <input id="responsavel" placeholder="Respons√°vel">
      <input id="prazo" type="date">
      <select id="status"><option>Aberto</option><option>Em Andamento</option><option>Fechado</option></select>
      <div style="display:flex;gap:.5rem;flex-wrap:wrap">
        <button id="salvar" class="btn">Adicionar</button>
        <button id="limpar" class="btn btn-ghost">Limpar</button>
      </div>
    </div>

    <table>
      <thead><tr><th>A√ß√£o</th><th>Respons√°vel</th><th>Prazo</th><th>Status</th><th>A√ß√µes</th></tr></thead>
      <tbody id="tb"></tbody>
    </table>
    <div class="muted">Observa√ß√£o: dados s√£o salvos no navegador (localStorage). O arquivo acoes.json √© usado como semente inicial.</div>
  </div>

  <div class="footer">Desenvolvido por Marcos Gar√ßon P de Oliveira</div>

  <script>
    const LS = 'Acoes_MQ_01';
    async function seed(){
      if(localStorage.getItem(LS)) return JSON.parse(localStorage.getItem(LS));
      try{
        const r = await fetch('../Setor%20-XY/MQ_01/acoes.json'); const d = await r.json();
        localStorage.setItem(LS, JSON.stringify(d)); return d;
      }catch(e){ localStorage.setItem(LS, JSON.stringify([])); return []; }
    }
    let acoes = [];
    function render(){
      const tb = document.getElementById('tb'); tb.innerHTML='';
      acoes.forEach((a,i)=>{
        tb.insertAdjacentHTML('beforeend', `
          <tr>
            <td>${a.acao}</td><td>${a.responsavel}</td><td>${a.prazo||'-'}</td><td>${a.status}</td>
            <td>
              <button class="btn btn-warn" onclick="editar(${i})">Editar</button>
              <button class="btn btn-danger" onclick="excluir(${i})">Excluir</button>
            </td>
          </tr>`);
      });
    }
    window.editar = (i)=>{
      const a = acoes[i];
      acao.value=a.acao; responsavel.value=a.responsavel; prazo.value=a.prazo||''; status.value=a.status||'Aberto';
      salvar.onclick=()=>{
        acoes[i]={acao:acao.value,responsavel:responsavel.value,prazo:prazo.value,status:status.value};
        localStorage.setItem(LS, JSON.stringify(acoes)); render(); limpar();
      };
    };
    window.excluir = (i)=>{ if(confirm('Excluir?')){ acoes.splice(i,1); localStorage.setItem(LS, JSON.stringify(acoes)); render(); } };
    function limpar(){ acao.value=''; responsavel.value=''; prazo.value=''; status.value='Aberto'; salvar.onclick=add; }
    function add(){
      if(acao.value && responsavel.value){
        acoes.push({acao:acao.value,responsavel:responsavel.value,prazo:prazo.value,status:status.value||'Aberto'});
        localStorage.setItem(LS, JSON.stringify(acoes)); render(); limpar();
      }else alert('Preencha a√ß√£o e respons√°vel');
    }
    document.getElementById('limpar').onclick = limpar;
    async function init(){ acoes = await seed(); render(); salvar.onclick=add; }
    init();
  </script>
</body></html>
