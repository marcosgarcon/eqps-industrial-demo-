<!doctype html><html lang="pt-br"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Painel da FÃ¡brica</title>
<link rel="stylesheet" href="./assets/style.css">
</head><body>
  <div class="header">
    <h1>ğŸ­ Painel da FÃ¡brica</h1>
    <nav>
      <a href="./index.html">Dashboard</a>
      <a href="./fabrica.html">FÃ¡brica</a>
      <a href="./tv.html">TV</a>
      <a href="./acoes.html">AÃ§Ãµes</a>
      <a href="./analise.html">AnÃ¡lises</a>
    </nav>
  </div>

  <div class="container">
    <div class="grid" id="grid"></div>
    <div class="muted">Para adicionar mais mÃ¡quinas, crie novas pastas como â€œMQ_02â€, â€œMQ_03â€ em â€œSetor -XY/â€.</div>
  </div>

  <div class="footer">Desenvolvido por Marcos GarÃ§on P de Oliveira</div>

  <script>
    // Por ora, sÃ³ MQ_01; adicione aqui novas mÃ¡quinas quando criar as pastas
    const maquinas = [{nome:'MQ_01', base:'../Setor%20-XY/MQ_01'}];
    async function card(maquina){
      try{
        const r = await fetch(`${maquina.base}/dados.json`); const d = await r.json();
        const hist = d.historico||[];
        const abertos = hist.filter(h=>h.status==='Aberto').length;
        const atrasos = hist.filter(h=>h.status==='Aberto' && h.prazo && new Date(h.prazo) < new Date()).length;
        const prox = hist.map(h=>h.prazo).filter(Boolean).sort()[0]||'-';
        grid.insertAdjacentHTML('beforeend', `
          <div class="card">
            <h3>${maquina.nome}</h3>
            <div class="muted">Abertos: ${abertos} â€¢ Atrasados: ${atrasos} â€¢ PrÃ³x. prazo: ${prox}</div>
            <p><a class="btn" href="./index.html">Abrir Dashboard</a></p>
          </div>
        `);
      }catch(e){
        grid.insertAdjacentHTML('beforeend', `<div class="card"><h3>${maquina.nome}</h3><div class="muted">Sem dados</div></div>`);
      }
    }
    maquinas.forEach(card);
  </script>
</body></html>
