<!doctype html><html lang="pt-br"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Painel da F√°brica</title>
<link rel="stylesheet" href="./assets/style.css">
</head><body>
  <div class="header">
    <h1>üè≠ Painel da F√°brica</h1>
    <nav>
      <a href="./fabrica.html">F√°brica</a>
      <a href="./index.html">Dashboard</a>
      <a href="./tv.html">TV</a>
      <a href="./acoes.html">A√ß√µes</a>
      <a href="./analise.html">An√°lises</a>
    </nav>
  </div>

  <div class="container">
    <div class="grid" id="grid"></div>
    <div class="muted">Para incluir mais m√°quinas, copie ‚ÄúMQ_01‚Äù em ‚ÄúSetor -XY/‚Äù (ex.: MQ_02, MQ_03...).</div>
  </div>

  <div class="footer">Desenvolvido por Marcos Gar√ßon P de Oliveira</div>

  <script>
    const maquinas=[{nome:'MQ_01', base:'../Setor%20-XY/MQ_01'}];
    const grid=document.getElementById('grid');
    async function resumo(m){
      try{
        const r=await fetch(`${m.base}/dados.json`,{cache:'no-store'}); const d=await r.json();
        const hist=d.historico||[], abertos=hist.filter(h=>h.status==='Aberto').length;
        const atrasados=hist.filter(h=>h.status==='Aberto'&&h.prazo&&new Date(h.prazo)<new Date()).length;
        const prox=hist.map(h=>h.prazo).filter(Boolean).sort()[0]||'-';
        grid.insertAdjacentHTML('beforeend',`
          <div class="card">
            <h3>${m.nome}</h3>
            <div class="muted">Abertos: <b>${abertos}</b> ‚Ä¢ Atrasados: <b>${atrasados}</b> ‚Ä¢ Pr√≥x. prazo: <span class="badge">${prox}</span></div>
            <p style="margin-top:.5rem">
              <a class="btn" href="./index.html">Dashboard</a>
              <a class="btn" href="./acoes.html">A√ß√µes</a>
              <a class="btn" href="./analise.html">An√°lises</a>
              <a class="btn" href="./tv.html">TV</a>
            </p>
          </div>`);      
      }catch(e){ grid.insertAdjacentHTML('beforeend', `<div class="card"><h3>${m.nome}</h3><div class="muted">Sem dados.json</div></div>`); }
    }
    maquinas.forEach(resumo);
  </script>
</body></html>
